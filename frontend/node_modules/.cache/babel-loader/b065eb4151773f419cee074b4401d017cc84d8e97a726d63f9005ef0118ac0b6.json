{"ast":null,"code":"import React,{useEffect,useState}from'react';import axios from'axios';import toast from'react-hot-toast';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const EnterpriseSettings=_ref=>{let{user,onBack}=_ref;const[enterprises,setEnterprises]=useState([]);const[myEnterprises,setMyEnterprises]=useState([]);const[selectedEntId,setSelectedEntId]=useState('');const[email,setEmail]=useState('');const[loading,setLoading]=useState(false);useEffect(()=>{fetchEnterprises();},[]);const fetchEnterprises=async()=>{try{const res=await axios.get('https://void-scanner-api.onrender.com/api/admin/enterprises');const ents=res.data||[];setEnterprises(ents);const mine=ents.filter(e=>e.ownerEmail===(user===null||user===void 0?void 0:user.email)||(e.members||[]).includes(user===null||user===void 0?void 0:user.email));setMyEnterprises(mine);if(mine.length>0)setSelectedEntId(mine[0].id);}catch(err){console.error(err);toast.error('Enterprises yüklenemedi');}};const addMember=async e=>{e.preventDefault();if(!selectedEntId)return toast.error('Enterprise seçin');if(!email)return toast.error('Email girin');try{setLoading(true);const res=await axios.post(\"https://void-scanner-api.onrender.com/api/enterprises/\".concat(selectedEntId,\"/add-member\"),{email});toast.success('Üye eklendi');setEmail('');await fetchEnterprises();}catch(err){var _err$response,_err$response$data;console.error(err);const msg=(err===null||err===void 0?void 0:(_err$response=err.response)===null||_err$response===void 0?void 0:(_err$response$data=_err$response.data)===null||_err$response$data===void 0?void 0:_err$response$data.message)||'Üye eklenemedi';toast.error(msg);}finally{setLoading(false);}};return/*#__PURE__*/_jsxs(\"div\",{style:{minHeight:'100vh',background:'linear-gradient(135deg, #0a0a0a 0%, #1a1a1a 50%, #0a0a0a 100%)',color:'#ffffff',position:'relative',overflow:'hidden'},children:[/*#__PURE__*/_jsx(\"div\",{style:{background:'rgba(20, 20, 20, 0.9)',backdropFilter:'blur(20px)',padding:'20px',borderBottom:'1px solid rgba(220, 38, 38, 0.3)'},children:/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center',gap:'12px'},children:[/*#__PURE__*/_jsx(\"button\",{onClick:onBack,style:{background:'rgba(220, 38, 38, 0.2)',color:'#fff',border:'1px solid rgba(220,38,38,0.5)',borderRadius:8,padding:'10px 16px',cursor:'pointer',fontWeight:600},children:\"\\u2190 Back\"}),/*#__PURE__*/_jsx(\"h1\",{style:{margin:0,fontSize:'1.6rem'},children:\"Enterprise Settings\"})]})}),/*#__PURE__*/_jsxs(\"div\",{style:{maxWidth:1100,margin:'0 auto',padding:'24px'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{background:'rgba(20,20,20,0.8)',border:'1px solid rgba(220,38,38,0.3)',borderRadius:12,padding:20,marginBottom:20},children:[/*#__PURE__*/_jsx(\"h3\",{style:{margin:'0 0 12px 0'},children:\"My Enterprises\"}),myEnterprises.length===0?/*#__PURE__*/_jsx(\"div\",{style:{color:'rgba(255,255,255,0.7)'},children:\"Bu kullan\\u0131c\\u0131ya ba\\u011Fl\\u0131 enterprise yok.\"}):/*#__PURE__*/_jsx(\"div\",{style:{background:'rgba(20,20,20,0.8)',color:'#fff',border:'1px solid rgba(220,38,38,0.5)',borderRadius:8,padding:'12px 14px',minWidth:260,fontWeight:700},children:(_current$members=>{const current=myEnterprises.find(e=>e.id===selectedEntId)||myEnterprises[0];return current?\"\".concat(current.name,\" \\u2014 \").concat(((_current$members=current.members)===null||_current$members===void 0?void 0:_current$members.length)||0,\"/\").concat(current.seats):'-';})()})]}),(()=>{const currentEnterprise=myEnterprises.find(e=>e.id===selectedEntId)||myEnterprises[0];const isOwner=currentEnterprise&&currentEnterprise.ownerEmail===(user===null||user===void 0?void 0:user.email);if(!isOwner){return/*#__PURE__*/_jsxs(\"div\",{style:{background:'rgba(20,20,20,0.8)',border:'1px solid rgba(220,38,38,0.3)',borderRadius:12,padding:20},children:[/*#__PURE__*/_jsx(\"h3\",{style:{margin:'0 0 12px 0'},children:\"Add Member by Email\"}),/*#__PURE__*/_jsx(\"div\",{style:{color:'rgba(255,255,255,0.7)',padding:'12px',background:'rgba(220,38,38,0.1)',borderRadius:8,border:'1px solid rgba(220,38,38,0.3)'},children:\"Only enterprise owners can add members to the enterprise.\"})]});}return/*#__PURE__*/_jsxs(\"div\",{style:{background:'rgba(20,20,20,0.8)',border:'1px solid rgba(220,38,38,0.3)',borderRadius:12,padding:20},children:[/*#__PURE__*/_jsx(\"h3\",{style:{margin:'0 0 12px 0'},children:\"Add Member by Email\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:addMember,style:{display:'flex',gap:10,flexWrap:'wrap'},children:[/*#__PURE__*/_jsx(\"input\",{type:\"email\",placeholder:\"user@example.com\",value:email,onChange:e=>setEmail(e.target.value),style:{background:'rgba(20,20,20,0.8)',color:'#fff',border:'1px solid rgba(220,38,38,0.5)',borderRadius:8,padding:'10px 12px',minWidth:260}}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:loading||!selectedEntId,style:{background:'linear-gradient(135deg,#dc2626,#b91c1c)',color:'#fff',border:'none',borderRadius:8,padding:'10px 16px',fontWeight:700,cursor:'pointer'},children:loading?'Adding...':'Add Member'})]})]});})()]})]});};export default EnterpriseSettings;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}